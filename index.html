<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <style>
        #canvas {
            width:100%;
            height:100%;
        }
    </style>

<script src="https://preview.babylonjs.com/babylon.js"></script>

</head>
<body>
<canvas id="canvas"></canvas>

<script>
    window.addEventListener('DOMContentLoaded', function(){
        var canvas = document.getElementById('canvas');

        var engine = new BABYLON.Engine(canvas, true);

var createScene = function () {

    // This creates a basic Babylon Scene object (non-mesh)
    var scene = new BABYLON.Scene(engine);
    
    // Create VR camera assuming user height is 2 meters
    var camera = new BABYLON.WebVRFreeCamera("camera", new BABYLON.Vector3(0, 2, 0), scene);
    
    // Enable VR onClick
    scene.onPointerDown = function () {
        scene.onPointerDown = undefined;
        camera.attachControl(canvas, true);
    }    

    BABYLON.SceneLoader.ImportMesh("", "https://www.babylonjs.com/Assets/DamagedHelmet/glTF/", "DamagedHelmet.gltf", scene, function (meshes) {
        meshes[0].scaling.scaleInPlace(0.5)
        meshes[0].position.set(0,1.5,1)

        // Create light
        var light = new BABYLON.DirectionalLight("light1", new BABYLON.Vector3(-2, -3, 1), scene);
        light.position = new BABYLON.Vector3(6, 9, 3);
        light.intensity = 0.5;  

        // Add shadows
        var generator = new BABYLON.ShadowGenerator(512, light);
        generator.useBlurExponentialShadowMap = true;
        generator.blurKernel = 32;
        for (var i = 0; i < scene.meshes.length; i++) {
            generator.addShadowCaster(scene.meshes[i]);    
        }

        // Create basic scene
        var helper = scene.createDefaultEnvironment({
            enableGroundMirror: true,
            groundShadowLevel: 0.6
        });       
        helper.setMainColor(BABYLON.Color3.Teal());
        
        scene.onBeforeRenderObservable.add(()=>{
            meshes[0].rotation.y+=0.005
        })
    });

    return scene;
};




        var scene = createScene();
        engine.runRenderLoop(function(){
            scene.render();
        });

    });
</script>

</body>
</html>

